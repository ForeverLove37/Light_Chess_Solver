# 光影矩阵用户指南

## 简介

光影矩阵 (Lights Matrix) 是一个优雅的解谜游戏，基于经典的"正反棋"(Lights Out)游戏机制。目标是通过点击格子将所有格子点亮，每次点击会翻转该格子及其相邻格子的状态。

## 快速开始

### 游戏规则

1. **目标**: 将所有格子点亮（变为青色）
2. **操作**: 点击任意格子
3. **效果**: 被点击的格子及其上下左右相邻的格子会翻转状态
4. **策略**: 使用最少的步数完成谜题

### 基本操作

#### 启动游戏
1. 打开浏览器访问 `http://localhost:3000`
2. 游戏会自动加载默认的5×5棋盘

#### 进行游戏
- **点击格子**: 点击任意格子进行翻转
- **观察效果**: 注意被点击格子及相邻格子的状态变化
- **规划策略**: 思考每一步的最佳选择

## 界面说明

### 主要区域

```
┌─────────────────────────────────────────────────┐
│              光影矩阵 - 头部区域               │
├─────────────────────────────────────────────────┤
│              控制面板                           │
├─────────────────────────────────────────────────┤
│              QoL功能面板                        │
├─────────────────────────────────────────────────┤
│                                                 │
│              游戏棋盘                           │
│                                                 │
├─────────────────────────────────────────────────┤
│              解法控制面板 (如果有解法)          │
└─────────────────────────────────────────────────┘
```

### 控制面板功能

#### 棋盘设置
- **行数/列数**: 调整棋盘大小 (3×3 到 10×10)
- **重置**: 清空棋盘，重新开始
- **求解**: 获取当前棋盘的最优解法
- **随机棋盘**: 生成新的随机谜题

#### 游戏状态
- **服务器状态**: 显示后端服务连接状态
  - 🟢 在线: 服务器正常连接
  - 🟡 检查中: 正在检查服务器状态
  - 🔴 离线: 服务器连接失败

### QoL功能面板

#### 操作历史
- **撤销 (↩️)**: 撤销上一步操作
- **重做 (↪️)**: 重做被撤销的操作
- **步数统计**: 显示当前已走步数

#### 智能提示
- **提示 (💡)**: 获取下一步最优操作的提示
- **清除提示 (🚫)**: 清除当前显示的提示

#### 游戏存档
- **保存 (💾)**: 保存当前游戏进度到本地
- **加载 (📂)**: 加载之前保存的游戏

### 游戏棋盘

#### 格子状态
- **未点亮**: 深色格子
- **已点亮**: 青色格子带发光效果
- **悬停效果**: 鼠标悬停时显示影响的格子范围

#### 视觉效果
- **翻转动画**: 点击格子时的3D翻转效果
- **涟漪效果**: 显示操作影响的范围
- **发光效果**: 已点亮格子的呼吸灯效果

### 解法控制面板

当使用"求解"功能后，会显示解法控制面板：

#### 解法步骤
- **上一步**: 执行解法中的前一步
- **下一步**: 执行解法中的下一步
- **自动播放**: 自动执行完整的解法
- **进度条**: 显示解法执行进度

#### 步骤高亮
- **绿色高亮**: 已执行的解法步骤
- **呼吸效果**: 下一步要执行的格子

## 主题系统

### 主题切换
点击右上角的主题切换按钮可以切换主题：

1. **深色主题 🌙** (默认)
   - 深色背景，青色强调色
   - 适合夜间使用

2. **浅色主题 ☀️**
   - 浅色背景，深色文字
   - 适合白天使用

3. **高对比度主题 ⚡**
   - 黑白高对比度
   - 适合视力障碍用户

### 主题记忆
- 主题选择会自动保存
- 下次访问时会恢复上次的选择

## 高级功能

### 智能提示系统

#### 获取提示
1. 点击"💡 提示"按钮
2. 系统会分析当前棋盘状态
3. 在棋盘上高亮显示下一步最佳操作

#### 提示特点
- **最优性**: 提示的步骤基于数学最优解
- **实时性**: 每次提示都会重新计算当前状态
- **视觉化**: 通过高亮和动画清晰显示

### 存档系统

#### 自动保存
- 游戏进度会自动保存到浏览器本地存储
- 支持意外关闭浏览器后恢复游戏

#### 手动存档
- **保存**: 保存当前游戏状态，包括：
  - 棋盘状态
  - 移动步数
  - 棋盘大小
  - 解决状态

- **加载**: 恢复之前保存的游戏状态

#### 存档限制
- 存档保存7天后自动清理
- 浏览器存储空间限制约5MB

### 键盘快捷键

#### 游戏操作
- `Ctrl + Z`: 撤销操作
- `Ctrl + Y`: 重做操作
- `Space`: 获取提示
- `R`: 重置游戏
- `S`: 求解当前棋盘

#### 导航
- `1-9`: 快速设置棋盘大小
- `↑↓←→`: 在移动端导航格子

## 游戏策略

### 基本策略

#### 从角落开始
- 角落格子只影响2个其他格子
- 边缘格子影响3个其他格子
- 中心格子影响4个其他格子

#### 模式识别
- 寻找常见的模式和组合
- 学习基本的 solving patterns
- 练习识别可简化的情况

#### 逆向思维
- 从目标状态倒推
- 思考哪些格子需要被点击奇数次
- 避免重复点击同一个格子

### 高级技巧

#### 分块解决
- 将大棋盘分成小块
- 逐个解决各个区域
- 注意区域间的相互影响

#### 最少步数优化
- 避免冗余操作
- 利用对称性减少步数
- 学习标准解法模式

## 常见问题

### 技术问题

#### 游戏无法启动
1. 确认后端服务器正在运行 (端口7676)
2. 检查浏览器控制台是否有错误信息
3. 尝试刷新页面

#### 提示功能不工作
1. 确认服务器连接正常
2. 检查当前棋盘是否有解
3. 稍等片刻，计算需要时间

#### 存档功能异常
1. 确认浏览器支持localStorage
2. 检查浏览器存储空间是否已满
3. 尝试清除浏览器数据后重试

### 游戏问题

#### 棋盘无解
某些棋盘配置确实无解，这是游戏的数学特性：
- 尝试点击"随机棋盘"生成新谜题
- 或者调整棋盘大小重新开始

#### 操作不符合预期
- 确认理解了游戏规则
- 注意点击会影响相邻格子
- 观察悬停时显示的影响范围

#### 动画卡顿
- 关闭一些不必要的浏览器标签
- 检查设备性能
- 可以在设置中减少动画效果

## 性能优化

### 浏览器设置

#### 推荐浏览器
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### 性能设置
- 启用硬件加速
- 关闭不必要的浏览器扩展
- 确保足够的内存可用

### 网络要求

#### 最低要求
- 稳定的互联网连接
- 延迟 < 100ms (对于提示功能)

#### 离线使用
- 基本游戏功能可以离线使用
- 提示和求解功能需要网络连接

## 隐私和安全

### 数据收集

#### 本地数据
- 游戏进度保存在浏览器本地
- 主题设置保存在本地
- 不会上传到服务器

#### 匿名统计
- 为了改进游戏体验，可能会收集：
  - 游戏完成时间
  - 功能使用频率
  - 错误日志

### 数据安全

#### 加密存储
- 敏感数据加密后存储
- 定期清理过期数据

#### 隐私保护
- 不会收集个人身份信息
- 不会跟踪用户在其他网站的活动
- 用户可以随时清除本地数据

## 联系和支持

### 获取帮助

#### 文档资源
- 查看详细的技术文档
- 阅读常见问题解答
- 观看游戏演示视频

#### 技术支持
- GitHub Issues: 报告bug和功能请求
- 邮件支持: 联系开发团队
- 社区论坛: 与其他玩家交流

### 贡献指南

#### 代码贡献
- Fork项目仓库
- 创建功能分支
- 提交Pull Request

#### 反馈建议
- 填写用户体验调查
- 提出改进建议
- 报告发现的bug

## 更新日志

### 版本 1.0.0
- ✅ 基础游戏功能
- ✅ 智能求解算法
- ✅ 主题切换系统
- ✅ QoL功能 (撤销/重做/提示)
- ✅ 本地存档功能
- ✅ 响应式设计

### 计划中的功能
- 🔄 多人对战模式
- 🔄 排行榜系统
- 🔄 自定义主题编辑器
- 🔄 移动端应用

---

*用户指南最后更新: 2025-10-02*